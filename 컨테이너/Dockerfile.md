# Dockerfile 작성하기

## Docker Image Build
- Dockerfile이나 애플리케이션 실행 파일을 사용해서 도커 컨테이너의 원형이 될 이미지를 만드는 과정

## Dockerfile instruction
- FROM
  - 컨테이너의 원형(틀) 역할을 할 도커 이미지 정의
  - From키워드를 사용하여 base가 되는 image를 지정 
  - 주로 OS 이미지나 런타임 이미지를 지정함

- RUN
  - 이미지를 빌드할 떄 사용하는 커맨드를 설정할 때 사용
  - 예를 들어, FROM절에서 OS를 설정하고 아파치를 설치하고 싶다면 => 아파치 설치 커맨드를 작성하면 됨
  - RUN 명령어까지 도커 빌드 과정에서 실행되며 그 결과 새 이미지가 만들어진다.

- ADD
  - 이미지에 호스트의 파일이나 폴더를 추가하기 위해 사용
  - 만약 이미지에 복사하려는 디렉토리가 존재하지 않으면 DOCKER가 자동으로 생성
  - 디렉토리의 권한 등을 설정할 수 있음

- COPY
  - 호스트 환경의 파일이나 폴더를 이미지 안으로 복사하기 위해 사용
  - 'ADD'와 동일하게 동작하지만 가장 확실한 차이점은 URL을 지정하거나, 압축파일을 자동으로 풀지 않음

- EXPOSE
  -  이미지가 통신에 사용할 포트를 지정할 때 사용

- ENV
  - 환경 변수를 지정할 때 사용
  - 여기서 설정한 변수는 $name, ${name}의 형태로 사용할 수 있음
  - 추가로 아래와 같은 문법을 사용하여 사용할 수도 있음
    - ${name:-else} : name이 정의가 안되어 있다면 'else'가 사용됨
- CMD
  - 도커 컨테이너가 실행될 때 실행할 커맨드를 지정
  - 'RUN'과 비슷하지만 CMD는 도커 이미지를 빌드할 때 실행되는 것이 아니라 컨테이너를 시작할 때 실행된다는 것이 다름

- ENTRYPOINT
  - 도커 이미지가 실행될 때 사용되는 기본 커맨드를 지정(강제)

- WORKDIR
  - RUN, CMD, ENTRYPOINT 등을 사용한 커맨드를 실행하는 디렉토리를 지정
  - w 옵션으로 오버라이딩할 수 있음

- VOLUME
  - 퍼시스턴스 데이터를 저장할 경로를 지정할 때 사용
  - 호스트의 디렉토리를 도커 컨테이너에 연결 
  - 주로 휘발성으로 사용되면 안되는 데이터를 저장할 때 사용